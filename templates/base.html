{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'favicon.png' %}" rel="icon" type="image/png">
    <title>Home</title>
    <link rel="stylesheet" href="{% static 'assets/css/icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/uikit.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/tailwind.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<style>
    *{background-color: #ffffff;}
   .navbar {
    background-color: #35508a;
    color: #fff;
    display: flex;
    justify-content: space-between; /* Alignement des éléments sur toute la largeur */
    align-items: center; /* Centre les éléments verticalement */
    padding: 10px 20px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%; /* Utilisation de toute la largeur */
    z-index: 999;
}

.nav-items {
    display: flex;
    align-items: center; /* Centre les éléments verticalement */
}

.nav-item {
    margin-right: 20px; /* Ajoute un espacement entre les éléments */
}

/* Supprime les marges pour la disposition horizontale */
.header-avatar {
    margin-top: 0;
    margin-left: auto; /* Place l'avatar à droite */
}

.search-container {
    margin-left: auto; /* Place le conteneur de recherche à droite */
}

/* Supprime ou ajuste les styles spécifiques à la disposition verticale */
.icon-container {
    font-size: 16px; /* Taille de police ajustée pour la disposition horizontale */
}

/* Supprime ou ajuste les styles spécifiques à la disposition verticale */
.search-button {
    position: static; /* Annule la position absolue */
    left: auto;
    top: auto;
}

 
  .header-avatar {
      width: 40px; 
      height: 40px; 
      border-radius: 50%;
      margin-left: 10px;
  }
  
  .icon-container {
      display: flex;
      align-items: center;
      font-size: 10px;
  }
  
  .header-links-item {
     margin-left: px; 
     font-size: 2.5em; 
 }
 .search-container {
     display: flex;
     align-items: center;
     position: relative;
     margin-left: 10px;
     border: 2px solid #007bff;
     border-radius: 25px; 
     background-color: #f5f5f5; 
     padding: 8px 15px; 
     box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
     transition: all 0.3s ease;
 }
 
 .search-input {
     flex: 1;
     border: none;
     outline: none;
     padding: 8px 15px;
     font-size: 16px;
     background-color: transparent;
 }
 
 .search-input::placeholder {
     color: #999; 
     font-style: italic; 
 }
 
 .search-button {
     cursor: pointer;
     background-color: transparent;
     border: none;
     outline: none;
     width: 24px;
     height: 24px; 
     transition: transform 0.2s; 
 }
 .search-button:hover {
     transform: scale(1.1); 
 }
     .search-button {
         position: absolute;
         left: 275px;
         top: 0;
         cursor: pointer;
         background-color: transparent;
         border: none;
         outline: none;
     }
 body {
     background-color: #171717; 
     color: #ffffff; 
 }
 
 .post {
     background-color: #ffffff; 
 }
 
 
 .container {
     margin-top: 500px; 
 }
 
 
 /* CSS pour le mode sombre */
 body.dark-mode {
     background-color: #18191a; /* Couleur de fond sombre */
     color: #d8dade; /* Couleur du texte sombre */
 }
 
 .navbar.dark-mode {
     background-color: #242526; /* Couleur de fond de la barre de navigation sombre */
     color: #d8dade; /* Couleur du texte de la barre de navigation sombre */
 }
 
 .post.dark-mode {
     background-color: #242526; /* Couleur de fond des publications sombre */
     color: #d8dade; /* Couleur du texte des publications sombre */
 }
 
  </style>
  <script>
   function toggleDarkMode() {
     var body = document.body;
     var navbar = document.querySelector('.navbar');
     var post = document.querySelector('.post');
     
     body.classList.toggle('dark-mode'); 
     navbar.classList.toggle('dark-mode'); 
     post.classList.toggle('dark-mode'); 
 }
 </script>
 
 </head>
 <body >
     <header class="navbar" id="post">
         
         
 <div class="navbar-brand">SmartU</div>
 
 <button onclick="toggleDarkMode()" class="header-links-item">
     <span id="dark-mode-icon"><i class="fa fa-moon-o"></i></span> <!-- Utilisez l'icône de la lune de FontAwesome -->
 </button>
 <!-- Barre de navigation -->
 <div class="nav-items">
     <div class="nav-item">
         <a href="{% url 'index' %}">
             <i class="fa fa-home fa-lg"></i> <!-- Remplace "Accueil" par une icône de maison -->
         </a>
     </div>
     <div class="nav-item">
         <a href="{% url 'upload_transport_post' %}">
             <i class="fa fa-car fa-lg"></i> 
         </a>
     </div>
     
     <div class="nav-item">
         <a href="{% url 'upload_logement_post' %}">
             <i class="fa fa-bed fa-lg"></i> 
         </a>
     </div>
     
     <div class="nav-item">
         <a href="{% url 'upload_stage_post' %}">
             <i class="fa fa-briefcase fa-lg"></i> 
         </a>
     </div>
           <a href="{% url 'create-post' %}">
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                 <path d="M0 0h24v24H0z" fill="none"/>
                 <path d="M12 2c.55 0 1 .45 1 1v8h8c.55 0 1 .45 1 1s-.45 1-1 1h-8v8c0 .55-.45 1-1 1s-1-.45-1-1v-8H3c-.55 0-1-.45-1-1s.45-1 1-1h8V3c0-.55.45-1 1-1z"/>
             </svg>
         </a>
     </div>
 </div>
          <!-- Notification -->
 <a href="#" class="header-links-item">
     <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none"><path d="M12 22a2.02 2.02 0 0 1-2.01-2h4a2.02 2.02 0 0 1-.15.78a2.042 2.042 0 0 1-1.44 1.18h-.047A1.922 1.922 0 0 1 12 22zm8-3H4v-2l2-1v-5.5a8.065 8.065 0 0 1 .924-4.06A4.654 4.654 0 0 1 10 4.18V2h4v2.18c2.579.614 4 2.858 4 6.32V16l2 1v2z" fill="currentColor"/></g></svg>
     <!-- Notification count -->
     <span id="notification-count" class="notification-count{% if notification_count == 0 %} inactive{% endif %}">{{ unread_notifications_count }}</span>
 </a>
 <div uk-drop="mode: click;offset: 4" class="header_dropdown">
     <h4 class="-mt-5 -mx-5 bg-gradient-to-t from-gray-100 to-gray-50 border-b font-bold px-6 py-3">
         Notification 
     </h4>
     <ul class="dropdown_scrollbar" data-simplebar>
         {% for notification in notifications %}
         <li>
             <a href="#">
                 <div class="drop_avatar">
                     <img src="{{ notification.user.profileimg.url }}" alt="">
                 </div>
                 <div class="drop_content">
                     <p>
                         <strong class="text-link">{{ notification.user.username }}</strong>  
                         <span class="text-link">{{ notification.message }}</span>
                     </p>
                     <span class="time-ago">{{ notification.timestamp }}</span>
                 </div>
             </a>
         </li>
         {% empty %}
         <li>No notifications</li>
         {% endfor %}
     </ul>
     <a href="/notifications" class="see-all">See all</a>
 </div>
 
 <!-- CSS for inactive notification count -->
 <style>
     .notification-count {
         display: block;
         padding: 0.1rem 0.2rem; /* Adjusted padding */
         border-radius: 50%;
         background-color: red; /* Red color for the badge */
         color: white;
         width: 1rem; /* Set width */
         height: 1rem; /* Set height */
         font-size: 0.8rem; /* Adjust font size if needed */
         line-height: 1rem; /* Center content vertically */
         text-align: center; /* Center content horizontally */
     }
 
     .notification-count.inactive {
         display: none; /* Hide the count when it's inactive */
     }
 </style>
 
 
 <!-- JavaScript code to fetch and update notification count -->
 <script>
     // Function to fetch notification count
     function fetchNotificationCount() {
         // Get the notification count directly from the template variable
         var notificationCount = {unread_notifications_count };
         
         // Update the notification count
         $('#notification-count').text(notificationCount);
         
         // Optionally, you can also change the styling based on the count
         if (notificationCount > 0) {
             $('#notification-count').removeClass('inactive'); // Remove the style for inactive notifications
         } else {
             $('#notification-count').addClass('inactive'); // Apply the style for inactive notifications
         }
     }
 
     // Call the fetchNotificationCount function when the page loads
     $(document).ready(function() {
         fetchNotificationCount();
     });
 </script>
 
 
 
       <!-- Barre de recherche -->
 <div class="search-container">
     <form action="/search" method="POST" class="search-form">
         {% csrf_token %}
         <input type="text" name="username" placeholder="Search for username..">
         <button type="submit" class="search-button">
             <i class="fa fa-search"></i> 
         </button>
     </form>
 </div>
    <!-- profile -->
                     <a href="{% url 'profile' pk=request.user.username %}">
                         <img src="{{user_profile.profileimg.url}}" class="header-avatar" alt="">
                     </a>
                     <div uk-drop="mode: click;offset:9" class="header_dropdown profile_dropdown border-t">
                         <ul>
                             <li><a href="/settings"> Account setting </a> </li>
                             <li><a href="logout"> Log Out</a></li>
                         </ul>
                     </div>
                 </div>
             </div>
         </div>
     </header>
 </body></html>