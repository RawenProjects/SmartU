{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'favicon.png' %}" rel="icon" type="image/png">
    <title>Home</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'assets/css/icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/uikit.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/tailwind.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<style>
    /* Styles pour la barre de navigation */
 .navbar {
     background-color: #35508a;
     color: #fff;
     display: flex;
     justify-content: space-between;
     align-items: center;
     padding: 10px 20px;
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     z-index: 999;
 }
 
 .navbar-brand {
     font-size: 2rem;
     font-weight: bold;
 }
 
 .nav-items {
     display: flex;
     align-items: center;
 }
 
 .nav-item {
     margin-right: 50px;
 }
 
 .nav-item a {
     color: #ffffff;
     text-decoration: none;
     font-size: 1rem;
 }
 
 .nav-item a:hover {
     text-decoration: underline;
 }
 
 .header-avatar {
     width: 40px; 
     height: 40px; 
     border-radius: 50%;
     margin-left: 10px;
 }
 
 .icon-container {
     display: flex;
     align-items: center;
     font-size: 10px;
 }
 
 .header-links-item {
    margin-left: px; 
    font-size: 2.5em; 
}
.search-container {
    display: flex;
    align-items: center;
    position: relative;
    margin-left: 10px;
    border: 2px solid #007bff;
    border-radius: 25px; 
    background-color: #f5f5f5; 
    padding: 8px 15px; 
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
    transition: all 0.3s ease;
}

.search-input {
    flex: 1;
    border: none;
    outline: none;
    padding: 8px 15px;
    font-size: 16px;
    background-color: transparent;
}

.search-input::placeholder {
    color: #999; 
    font-style: italic; 
}

.search-button {
    cursor: pointer;
    background-color: transparent;
    border: none;
    outline: none;
    width: 24px;
    height: 24px; 
    transition: transform 0.2s; 
}
.search-button:hover {
    transform: scale(1.1); 
}
    .search-button {
        position: absolute;
        left: 275px;
        top: 0;
        cursor: pointer;
        background-color: transparent;
        border: none;
        outline: none;
    }
body {
    background-color: #171717; 
    color: #ffffff; 
}

.post {
    background-color: #ffffff; 
}

.navbar {
    background-color: #141165; 
}
.container {
    margin-top: 500px; 
}

.dark-mode .navbar {
    background-color: #000000; 
    color: #ffffff; 
}

.dark-mode .post {
    background-color: #000000; 
    color: #ffffff; 
}


 </style>
 <script>
  function toggleDarkMode() {
    var body = document.body;
    var navbar = document.querySelector('.navbar');
    var post = document.querySelector('.post');
    
    body.classList.toggle('dark-mode'); 
    navbar.classList.toggle('dark-mode'); 
    post.classList.toggle('dark-mode'); 
}
</script>

</head>
<body >
    <header class="navbar" id="post">
        
        
<div class="navbar-brand">SmartU</div>

<button onclick="toggleDarkMode()" class="header-links-item">
    <span id="dark-mode-icon">ðŸŒ™</span>
</button>
<!-- Barre de navigation -->
<div class="nav-items">
    <div class="nav-item">
        <a href="{% url 'index' %}">
            <i class="fa fa-home fa-lg"></i> <!-- Remplace "Accueil" par une icÃ´ne de maison -->
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'upload_transport_post' %}">
            <i class="fa fa-car fa-lg"></i> 
        </a>
    </div>
    
    <div class="nav-item">
        <a href="{% url 'upload_logement_post' %}">
            <i class="fa fa-bed fa-lg"></i> 
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'store' %}"> <!-- Mettez Ã  jour le lien pour diriger vers la page du magasin -->
            <i class="fa fa-shopping-cart fa-lg"></i>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'business_list' %}">
            <i class="fas fa-store fa-lg"></i>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'upload_stage_post' %}">
            <i class="fa fa-briefcase fa-lg"></i> 
        </a>
    </div>
          <a href="{% url 'create-post' %}">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                <path d="M0 0h24v24H0z" fill="none"/>
                <path d="M12 2c.55 0 1 .45 1 1v8h8c.55 0 1 .45 1 1s-.45 1-1 1h-8v8c0 .55-.45 1-1 1s-1-.45-1-1v-8H3c-.55 0-1-.45-1-1s.45-1 1-1h8V3c0-.55.45-1 1-1z"/>
            </svg>
        </a>
    </div>
</div>

         <!-- Notification -->
<a href="#" class="header-links-item">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none"><path d="M12 22a2.02 2.02 0 0 1-2.01-2h4a2.02 2.02 0 0 1-.15.78a2.042 2.042 0 0 1-1.44 1.18h-.047A1.922 1.922 0 0 1 12 22zm8-3H4v-2l2-1v-5.5a8.065 8.065 0 0 1 .924-4.06A4.654 4.654 0 0 1 10 4.18V2h4v2.18c2.579.614 4 2.858 4 6.32V16l2 1v2z" fill="currentColor"/></g></svg>
    <!-- Notification count -->
    <span id="notification-count" class="notification-count{% if notification_count == 0 %} inactive{% endif %}">{{ unread_notifications_count }}</span>
</a>
<div uk-drop="mode: click;offset: 4" class="header_dropdown">
    <h4 class="-mt-5 -mx-5 bg-gradient-to-t from-gray-100 to-gray-50 border-b font-bold px-6 py-3">
        Notification 
    </h4>
    <ul class="dropdown_scrollbar" data-simplebar>
        {% for notification in notifications %}
        <li>
            <a href="#">
                
                <div class="drop_content">
                    <p>
                        <strong class="text-link">{{ notification.user.username }}</strong>  
                        <span class="text-link">{{ notification.message }}</span>
                    </p>
                    <span class="time-ago">{{ notification.timestamp }}</span>
                </div>
            </a>
        </li>
        {% empty %}
        <li>No notifications</li>
        {% endfor %}
    </ul>
    <a href="/notifications" class="see-all">See all</a>
</div>

<!-- CSS for inactive notification count -->
<style>
    .notification-count {
        display: block;
        padding: 0.1rem 0.2rem; /* Adjusted padding */
        border-radius: 50%;
        background-color: red; /* Red color for the badge */
        color: white;
        width: 1rem; /* Set width */
        height: 1rem; /* Set height */
        font-size: 0.8rem; /* Adjust font size if needed */
        line-height: 1rem; /* Center content vertically */
        text-align: center; /* Center content horizontally */
    }

    .notification-count.inactive {
        display: none; /* Hide the count when it's inactive */
    }
</style>


<!-- JavaScript code to fetch and update notification count -->
<script>
    // Function to fetch notification count
    function fetchNotificationCount() {
        // Get the notification count directly from the template variable
        var notificationCount = {{ unread_notifications_count }};
        
        // Update the notification count
        $('#notification-count').text(notificationCount);
        
        // Optionally, you can also change the styling based on the count
        if (notificationCount > 0) {
            $('#notification-count').removeClass('inactive'); // Remove the style for inactive notifications
        } else {
            $('#notification-count').addClass('inactive'); // Apply the style for inactive notifications
        }
    }

    // Call the fetchNotificationCount function when the page loads
    $(document).ready(function() {
        fetchNotificationCount();
    });
</script>



      <!-- Barre de recherche -->
<div class="search-container">
    <form action="/search" method="POST" class="search-form">
        {% csrf_token %}
        <input type="text" name="username" placeholder="Search for username..">
        <button type="submit" class="search-button">
            <i class="fa fa-search"></i> 
        </button>
    </form>
</div>
   <!-- profile -->
                    <a href="{% url 'profile' pk=request.user.username %}">
                        <img src="{{user_profile.profileimg.url}}" class="header-avatar" alt="">
                    </a>
                    <div uk-drop="mode: click;offset:9" class="header_dropdown profile_dropdown border-t">
                        <ul>
                            <li><a href="/settings"> Account setting </a> </li>
                            <li><a href="logout"> Log Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div  id="post" class="post"class="container m-auto">

        <h1 class="lg:text-2xl text-lg font-extrabold leading-none text-gray-900 tracking-tight mb-5">Feed</h1> <!-- Afficher le mot "Feed" -->
        <div class="lg:flex justify-center lg:space-x-10 lg:space-y-0 space-y-5">
            <!-- left sidebar-->
            <div class="space-y-5 flex-shrink-0 lg:w-9/12 lg:pl-10" style="width: 50%; height: 50%;">            
                {% for post in posts reversed %}
                <div class="bg-white shadow rounded-md px-6 py-4"> 
                    <!-- post header-->
                    <div class="flex justify-between items-center">
                        <div class="flex flex-1 items-center space-x-4">
                            <span class="block font-semibold"><a href="/profile/{{post.user}}">@{{post.user}}</a></span>
                        </div>
                        <div>
                            <a href="#"><i class="icon-feather-more-horizontal text-black hover:bg-gray-200 rounded-full p-2 transition -mr-1"></i></a>
                            <div class="bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-black text-base border border-gray-100" uk-drop="mode: hover;pos: top-right">
                            <ul class="space-y-1">
                              <li> 
                                  <a href="#" class="flex items-center px-3 py-2 text-black hover:bg-black hover:text-black rounded-md">
                                   <i class="uil-share-alt mr-1"></i> Share
                                  </a> 
                              </li> 
                              
                               <li> 
                                  <a href="#" class="flex items-center px-3 py-2 text-black hover:bg-black hover:text-black rounded-md ">
                                   <i class="uil-favorite mr-1"></i>  Add favorites 
                                  </a> 
                              </li> 
                               <li>
                                <hr class="-mx-2 my-2 ">
                              </li> 
                              <li>
                                <form action="{% url 'delete-post' post.id %}" method="post">
                                    {% csrf_token %}
                                    <button type="submit" class="flex items-center px-3 py-2 text-black hover:bg-black hover:text-black rounded-md">
                                        <i class="uil-trash-alt mr-1 text-red-500"></i> Masquez ce post
                                    </button>
                                </form>
                            </li>
                            </ul>
                        </div>
                      </div>
                    </div>
                    <div uk-lightbox>
                        <p>
                            <a href="/profile/{{post.user}}">
                                <strong style="color: black;">PostÃ© par {{post.user}}</strong>
                            </a>
                            {{post.caption}}
                                            </p>
                        {% if post.image %}
                        <div uk-lightbox class="pr-90">
                            <a href="{{ post.image.url }}">  
                                <img src="{{ post.image.url }}" alt="" width="510" height="600">
                            </a>
                        </div>
                    {% endif %}
                    </div>
                    <div class="py-3 px-4 space-y-3"> 
                        <div class="flex space-x-4 lg:font-bold ">
                            <a href="#" onclick="likePost('{{ post.id }}')" class="flex items-center space-x-2">
                            <div class="p-1 rounded-full text-black">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25"  class="">
                                        <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                                    </svg>
                                    {% if post.no_of_likes == 0 %}
                                    <p>No likes</p>
                                    {% elif post.no_of_likes == 1 %}
                                    <p>Liked by {{post.no_of_likes}} person</p>
                                    {% else %}
                                    <p>Liked by {{post.no_of_likes}} people</p>
                                    {% endif %}
                                </div>
                                
                            </a>
                            <span id="like-count-{{ post.id }}" style="color: black;">{{ post.no_of_likes }}</span> likes
                            <script>
                                function likePost(postId) {
                                  event.preventDefault();
    
                                 fetch(/like-post?post_id=${postId})
                                    .then(response => {
                                     if (response.ok) {
                                      return response.json(); 
                                     } else {
                                         throw new Error('Une erreur s\'est produite lors de la demande.');
                                    }
                                   })
                                  .then(data => {
                // Met Ã  jour le nombre de likes affichÃ© sur la page
                                    const likeCountElement = document.getElementById(like-count-${postId});
                                       if (likeCountElement) {
                                              likeCountElement.textContent = data.likes;
                                        }
                                        })
                                        .catch(error => {
                                            console.error('Une erreur s\'est produite lors de la demande:', error);
                                           });
    }
                                </script>    
                            <a href="#" class="flex items-center space-x-2 ">
                                <div class="p-2 rounded-full text-black">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" width="25" height="25" class="">
                                        <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                                    </svg>
                                </div>  
                            </a> 
                            <div class="comment-section">
                                <input type="text" class="comment-input" placeholder="Ajouter un commentaire...">
                                
                                <div class="comment-input-container" style="display: none;">
                                    <input type="text" class="comment-input" placeholder="Ajouter un commentaire...">
                                    <button class="submit-comment-btn text-black">Envoyer</button>
                                </div>
                            
                                <div class="comments-list text-black">
                                    <!-- Cette section sera remplie par JavaScript avec les commentaires -->
                                </div>
                            </div>
                            <script>
                                document.querySelectorAll('.comment-input').forEach(input => {
        input.addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                // EmpÃªcher le comportement par dÃ©faut de la touche "EntrÃ©e" (ajout d'un saut de ligne)
                event.preventDefault();
    
                // RÃ©cupÃ©rer le contenu du champ de commentaire
                const commentText = this.value.trim();
    
                // VÃ©rifier si le commentaire n'est pas vide
                if (commentText !== '') {
                    // CrÃ©er un Ã©lÃ©ment de commentaire
                    const commentItem = document.createElement('div');
                    commentItem.classList.add('comment-item');
                    commentItem.textContent = commentText;
    
                    // Ajouter le commentaire Ã  la liste des commentaires
                    const commentsList = this.parentElement.querySelector('.comments-list');
                    commentsList.appendChild(commentItem);
    
                    // Effacer le champ de commentaire aprÃ¨s l'ajout du commentaire
                    this.value = '';
                }
            }
        });
    });
    // JavaScript
    document.querySelectorAll('.comment-btn').forEach(button => {
        button.addEventListener('click', function() {
            // Afficher le champ de saisie du commentaire lorsque le bouton "Commenter" est cliquÃ©
            const commentInputContainer = this.parentElement.querySelector('.comment-input-container');
            commentInputContainer.style.display = 'block';
        });
    });
    
    document.querySelectorAll('.submit-comment-btn').forEach(button => {
        button.addEventListener('click', function() {
            // RÃ©cupÃ©rer le contenu du champ de saisie du commentaire
            const commentInput = this.parentElement.querySelector('.comment-input');
            const commentText = commentInput.value.trim();
    
            // VÃ©rifier si le commentaire n'est pas vide
            if (commentText !== '') {
                // CrÃ©er un Ã©lÃ©ment de commentaire
                const commentItem = document.createElement('div');
                commentItem.classList.add('comment-item');
                commentItem.textContent = commentText;
    
                // Ajouter le commentaire Ã  la liste des commentaires
                const commentsList = this.parentElement.nextElementSibling;
                commentsList.appendChild(commentItem);
    
                // Effacer le champ de commentaire aprÃ¨s l'ajout du commentaire
                commentInput.value = '';
    
                // Masquer le champ de saisie du commentaire
                this.parentElement.style.display = 'none';
            }
        });
    });
    
    
    
                            </script>
                            {% if post.image %}
        <a href="{{ post.image.url }}" class="flex items-center space-x-2 flex-1 justify-end text-black" download>
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="25" height="25" preserveAspectRatio="xMidYMid meet" viewBox="0 0 16 16"><g fill="currentColor"><path d="M8.5 1.5A1.5 1.5 0 0 1 10 0h4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h6c-.314.418-.5.937-.5 1.5v6h-2a.5.5 0 0 0-.354.854l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5A.5.5 0 0 0 10.5 7.5h-2v-6z"/></g></svg>
        </a>
    {% endif %}
                        </div>
                      
                    </div>
                </div>
                {% endfor %}
            </div>
            <!-- right sidebar-->
            <div class="right-side lg:pr-4" style="width: 40%; height: 40%;">
                <!-- upload -->
                   <a href="#"
                       class="bg-pink-500 flex font-bold hidden hover:bg-pink-600 hover:text-white inline-block items-center lg:block max-h-10 mr-4 px-4 py-2 rounded shado text-white">
                       <ion-icon name="add-circle" class="-mb-1
                        mr-1 opacity-90 text-xl uilus-circle"></ion-icon> Upload Pics
                   </a>
                    <!-- upload dropdown box -->
                   <div uk-dropdown="pos: top-right;mode:click ; animation: uk-animation-slide-bottom-small" class="header_dropdown">
               
                       <!-- notivication header -->
                       <div class="px-4 py-3 -mx-5 -mt-4 mb-5 border-b">
                           <h4>Upload Pics</h4>
                       </div>
               
                       <!-- notification contents -->
                       <div class="flex justify-center flex-center text-center">
               
                           <div class="flex flex-col choose-upload text-center">
                              
                               <div class="bg-gray-100 border-2 border-dashed flex flex-col h-24 items-center justify-center relative w-full rounded-lg  ">
                                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-12">
                                       <path d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z" />
                                       <path d="M9 13h2v5a1 1 0 11-2 0v-5z" />
                                   </svg>
                               </div>
               
                               <form id="uploadForm" action="upload" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <p class="my-3 leading-6"> Upload pics </p>
                                <div>
                                    <input type="file" name="image_upload">
                                    <textarea name="caption" placeholder="Caption..."></textarea>
                                    <br>
                                    <button id="uploadButton" class="button bg-blue-700" type="button">Upload</button>
                                </div>
                            </form>
                            <div id="uploadAlert" class="alert alert-success mt-3" style="display: none;" role="alert">
                                Image uploaded successfully!
                            </div>
                            <a href="#" class="uk-text-muted mt-3 uk-link"
                                uk-toggle="target: .choose-upload ;  animation: uk-animation-slide-right-small, uk-animation-slide-left-medium; queued: true">
                                Or Import Video </a>
                        </div>
            
                    </div>
                    <div class="px-4 py-3 -mx-5 -mb-4 mt-5 border-t text-sm">
                        Your Image size Must be Maxmium 999MB
                    </div>
                </div>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
                <script>
                   $(document).ready(function() {
        // SÃ©lectionnez le formulaire et le bouton "Upload" par leur ID
        var uploadForm = $("#uploadForm");
        var uploadButton = $("#uploadButton");
        var uploadAlert = $("#uploadAlert");
        var headerDropdown = $(".header_dropdown");
        
        // Ajouter un gestionnaire d'Ã©vÃ©nements pour le clic sur le bouton "Upload"
        uploadButton.on("click", function(event) {
            // EmpÃªcher le comportement par dÃ©faut du bouton (soumission du formulaire)
            event.preventDefault();
            
            // CrÃ©er un objet FormData pour le formulaire
            var formData = new FormData(uploadForm[0]);            
            // Envoyer le formulaire via AJAX
            $.ajax({
                type: "POST",
                url: "upload",
                data: formData,
                processData: false,
                contentType: false,
                headers: {
                    "X-CSRFToken": "{{ csrf_token }}"
                },
                success: function(response) {
                    // Afficher l'alerte de succÃ¨s
                    uploadAlert.show();
                    // Fermer la boÃ®te de tÃ©lÃ©chargement aprÃ¨s un court dÃ©lai (par exemple, 2 secondes)
                    setTimeout(function() {
                        headerDropdown.removeClass("uk-open");
                    }, 2000); // 2000 ms = 2 secondes
                },
                error: function(xhr, status, error) {
                    // Erreur lors de la requÃªte AJAX, gÃ©rer l'erreur si nÃ©cessaire
                    console.error("Error uploading image");
                    console.error(xhr.responseText); // Afficher le message d'erreur
                }
            });
        });
    });
    
                </script>
           
           <div class="bg-white shadow-md rounded-md overflow-hidden w-3/10 mx-auto">
            <div class="bg-gray-150 border-b border-gray-100 flex items-baseline justify-between py-4 px-10">
                <h2 class="font-semibold text-lg" style="color: black;">Users You Can Follow</h2>
            </div>
            <div class="divide-gray-300 divide-gray-50 divide-opacity-50 divide-y px-4">
                {% for suggestion in suggestions_username_profile_list %}
                <div class="flex items-center justify-between py-3">
                    <div class="flex flex-1 items-center space-x-4">
                        <a href="/profile/{{suggestion.user}}">
                            <img src="{{suggestion.profileimg.url}}" class="bg-gray-200 rounded-full w-10 h-10">
                        </a>
                        <div class="flex flex-col">
                            <span class="block capitalize font-semibold text-black"> {{suggestion.user}} </span>
                            <span class="block capitalize text-sm text-black"> {{suggestion.bio}} </span>
                        </div>
                    </div>
                    <a href="/profile/{{suggestion.user}}" class="border border-gray-200 font-semibold px-4 py-1 rounded-full hover:bg-pink-600 hover:text-white hover:border-pink-600 bg-white text-black"> View User </a>
                </div>
                {% endfor %}
            </div>
        </div>
       <!-- Link to event -->
    <div class="bg-white shadow-md rounded-md overflow-hidden mt-4">
        <div class="bg-gray-50 border-b border-gray-100 flex items-baseline justify-between py-4 px-6">
            <h2 class="font-semibold text-lg" style="color: black;">Upcoming Event</h2>
        </div>
        <div class="px-6 py-4">
            <p style="color: black;">
                <i class="fas fa-calendar-alt mr-2"></i>
                <a href="{% url 'upload_stag_post' %}" style="color: black;">View Event Details</a>
            </p>
        </div>
    </div>
    
        
    
        
        <div class="bg-white shadow-md rounded-md overflow-hidden mt-4">
            <div class="bg-gray-50 border-b border-gray-100 flex items-baseline justify-between py-4 px-6">
                <h2 class="font-semibold text-lg" style="color: black;">Create Room To chat</h2>
            </div>
            <form id="post-form" method="POST" action="checkview">
                {% csrf_token %}
                <label style="color: black;">Room Name</label>
                <input type="text" name="room_name" id="room_name" width="100px" required />
                <label style="color: black;">Username</label>
                <input type="text" name="username" id="username" width="100px" required />
                <input type="submit" value="Enter Room" style="background-color: rgb(88, 88, 182); color: white; display: block; margin: 0 auto;">
            </form>
        </div>
        
        
    </div>
        
        <script>
            function getRandomPost(posts) {
                var randomIndex = Math.floor(Math.random() * posts.length);
                return posts[randomIndex];
            }
        
            var allLogementPosts = Array.from(document.querySelectorAll("#logementPosts .post"));
            var allTransportPosts = Array.from(document.querySelectorAll("#transportPosts .post"));
            var allStagePosts = Array.from(document.querySelectorAll("#stagePosts .event"));
            
            var allPosts = allLogementPosts.concat(allTransportPosts, allStagePosts);
        
            var randomPost = getRandomPost(allPosts);
        
            var randomContent = document.getElementById("randomContent");
            if (randomContent) {
                randomContent.innerHTML = randomPost.outerHTML;
            }
    
        function nextPost() {
            currentPostIndex = (currentPostIndex + 1) % posts.length;
            displayPost(currentPostIndex);
        }
    
        function prevPost() {
            currentPostIndex = (currentPostIndex - 1 + posts.length) % posts.length;
            displayPost(currentPostIndex);
        }
    
        // Charger les posts alÃ©atoires lors du chargement de la page
        fetchRandomPosts();
    </script>
    <script src="{% static 'assets/js/tippy.all.min.js' %}"></script>  
    <script src="{% static 'assets/js/jquery-3.3.1.min.js' %}"></script>
    <script src="{% static 'assets/js/uikit.js' %}"></script>
    <script src="{% static 'assets/js/simplebar.js' %}"></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <script src="{% static '../../unpkg.com/ionicons%405.2.3/dist/ionicons.js' %}"></script> 
    </body>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const menuTabs = document.querySelectorAll('.header-menu-tab');
        menuTabs.forEach(tab => {
            tab.addEventListener('click', function(event) {
                event.preventDefault();
                const targetId = this.getAttribute('data-target');
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    document.querySelectorAll('.block').forEach(block => {
                        if (block.id !== targetId) {
                            block.classList.add('hidden');
                        }
                    });
                    targetElement.classList.remove('hidden');
                }
            });
        });
        const menuIcon = document.querySelector('.menu-icon');
        const headerMenu = document.querySelector('.header-menu');
        menuIcon.addEventListener('click', function() {
            headerMenu.classList.toggle('active');
        });
    });
    </script>
    <script>
        function toggleDarkMode() {
            var body = document.body;
            var navbar = document.querySelector('.navbar');
            var post = document.querySelector('.post');
            body.classList.toggle('dark-mode');
            navbar.classList.toggle('dark-mode');
            post.classList.toggle('dark-mode');
            var darkModeIcon = document.getElementById('dark-mode-icon');
            if (darkModeIcon.innerHTML.trim() === 'ðŸŒ™') {
                darkModeIcon.innerHTML = 'â˜€'; 
            } else {
                darkModeIcon.innerHTML = 'ðŸŒ™'; 
            }
        }
    </script>
    </body>
    </html>